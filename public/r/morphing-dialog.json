{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "morphing-dialog",
  "title": "Morphing Dialog",
  "description": "Shared-element transition from card preview to expanded modal.",
  "dependencies": [
    "framer-motion",
    "lucide-react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/kinetik/morphing-dialog/morphing-dialog.tsx",
      "content": "'use client';\r\n\r\nimport { AnimatePresence, motion, useReducedMotion } from 'framer-motion';\r\nimport { X } from 'lucide-react';\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nexport function MorphingDialog() {\r\n  const [open, setOpen] = useState(false);\r\n  const triggerRef = useRef<HTMLButtonElement>(null);\r\n  const dialogRef = useRef<HTMLDivElement>(null);\r\n  const shouldReduceMotion = useReducedMotion();\r\n  const spring = useMemo(() => (shouldReduceMotion ? { duration: 0 } : { type: 'spring', bounce: 0.25, duration: 0.5 }), [shouldReduceMotion]);\r\n\r\n  useEffect(() => {\r\n    function onKeyDown(event: KeyboardEvent) {\r\n      if (event.key === 'Escape') {\r\n        setOpen(false);\r\n      }\r\n      if (event.key === 'Tab' && open && dialogRef.current) {\r\n        const focusables = dialogRef.current.querySelectorAll<HTMLElement>('button,[href],input,select,textarea,[tabindex]:not([tabindex=\"-1\"])');\r\n        if (focusables.length === 0) {\r\n          return;\r\n        }\r\n        const first = focusables[0];\r\n        const last = focusables[focusables.length - 1];\r\n        if (event.shiftKey && document.activeElement === first) {\r\n          event.preventDefault();\r\n          last.focus();\r\n        } else if (!event.shiftKey && document.activeElement === last) {\r\n          event.preventDefault();\r\n          first.focus();\r\n        }\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n    return () => window.removeEventListener('keydown', onKeyDown);\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    if (!open && triggerRef.current) {\r\n      triggerRef.current.focus();\r\n    }\r\n  }, [open]);\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        ref={triggerRef}\r\n        type=\"button\"\r\n        onClick={() => setOpen(true)}\r\n        className=\"group relative w-full overflow-hidden rounded-2xl border border-border bg-card p-4 text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary\"\r\n      >\r\n        <motion.div layoutId=\"morph-image\" transition={spring} className=\"h-28 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600\" />\r\n        <div className=\"mt-3 space-y-1\">\r\n          <p className=\"text-sm font-semibold text-foreground\">Morphing Dialog</p>\r\n          <p className=\"text-xs text-muted-foreground\">Tap to expand this card into a full modal.</p>\r\n        </div>\r\n      </button>\r\n\r\n      <AnimatePresence>\r\n        {open && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={spring}\r\n            className=\"fixed inset-0 z-50 grid place-items-center bg-black/60 p-4 backdrop-blur-sm\"\r\n            onClick={() => setOpen(false)}\r\n          >\r\n            <motion.div\r\n              ref={dialogRef}\r\n              initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n              animate={{ opacity: 1, y: 0, scale: 1 }}\r\n              exit={{ opacity: 0, y: 20, scale: 0.95 }}\r\n              transition={spring}\r\n              className=\"w-full max-w-2xl overflow-hidden rounded-3xl border border-border bg-card p-6 shadow-2xl\"\r\n              role=\"dialog\"\r\n              aria-modal=\"true\"\r\n              aria-label=\"Morphing dialog preview\"\r\n              onClick={(event) => event.stopPropagation()}\r\n            >\r\n              <div className=\"flex justify-end mb-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setOpen(false)}\r\n                  className=\"rounded-full border border-border bg-muted/50 p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary\"\r\n                  aria-label=\"Close dialog\"\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n              <motion.div layoutId=\"morph-image\" transition={spring} className=\"h-52 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg\" />\r\n              <h3 className=\"mt-6 text-xl font-bold text-foreground\">Physical expansion, zero jump cuts.</h3>\r\n              <p className=\"mt-3 text-base leading-relaxed text-muted-foreground\">\r\n                The same visual element lifts and scales into context, creating continuity between list and detail views.\r\n              </p>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:ui"
}